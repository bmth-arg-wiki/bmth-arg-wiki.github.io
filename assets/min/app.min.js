document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".navbar-burger").forEach((e=>{e.addEventListener("click",(()=>{const t=e.dataset.target,n=document.getElementById(t);n&&(e.classList.toggle("is-active"),n.classList.toggle("is-active"))}))}))})),(()=>{function e(e){const t=e.split("/");return t.length>2?t[2]:""}document.addEventListener("DOMContentLoaded",(function(){const t=window.location.pathname,n=document.querySelectorAll(".tabs a"),a=e(t);n.forEach((t=>{const n=e(t.getAttribute("href"));a===n&&(document.querySelectorAll(".tabs li").forEach((e=>{e.classList.remove("is-active")})),t.parentElement.classList.add("is-active"))}))}))})(),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("toc-list");document.querySelectorAll("h2, h3").forEach((t=>{const n="h2"===t.tagName.toLowerCase()?2:3;let a=t.id||t.textContent.trim().replace(/\s+/g,"-").toLowerCase();t.id||(t.id=a);const s=document.createElement("li");s.classList.add(`toc-level-${n}`);const c=document.createElement("span"),i=document.createElement("a");i.href=`#${a}`,i.classList.add("text-adaptive"),i.textContent=t.textContent.trim().slice(0,-2),c.appendChild(i),s.appendChild(c),e&&e.appendChild(s)}))})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("#image-modal"),t=document.querySelector("#modal-image");document.querySelectorAll(".image-gallery").forEach((n=>{!async function(n,a){const s=`https://api.github.com/repos/bmth-arg-wiki/wiki-assets/contents/${a}`;try{const a=await fetch(s),c=await a.json();n.innerHTML="",c.forEach((a=>{if("file"===a.type&&a.name.match(/\.(jpg|jpeg|png|gif)$/i)){const s=document.createElement("div");s.className="column is-one-quarter-desktop is-one-quarter-tablet is-one-third-mobile";let c=document.createElement("div");c.classList.add("card");let i=document.createElement("div");i.classList.add("card-image"),c.appendChild(i);let o=document.createElement("figure");o.classList.add("image"),o.classList.add("is-3by2"),i.appendChild(o);let d=document.createElement("img");d.src=a.download_url,d.width=1200,d.height=200,d.classList.add("img-contain"),d.alt=a.name,d.loading="lazy",o.appendChild(d),s.appendChild(c),d.addEventListener("click",(n=>{e.classList.add("is-active"),t.src=n.target.src})),n.appendChild(s)}}))}catch(e){console.error("Error loading gallery:",e)}}(n,n.dataset.folder)}))})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("image-modal-nav"),t=document.getElementById("modal-image-nav"),n=e.querySelector(".modal-close"),a=e.querySelector(".modal-background"),s=e.querySelector(".next-button"),c=e.querySelector(".prev-button");let i=0,o=[];async function d(n,a){const s=`https://api.github.com/repos/bmth-arg-wiki/wiki-assets/contents/${a}`;try{const a=await fetch(s),c=await a.json();n.innerHTML="",c.forEach(((a,s)=>{if("file"===a.type&&/\.(jpg|jpeg|png|gif)$/i.test(a.name)){const c=document.createElement("div");c.className="column is-one-quarter-desktop is-one-quarter-tablet is-half-mobile";const d=document.createElement("div");d.classList.add("card");const l=document.createElement("figure");l.classList.add("image","is-3by2");const r=document.createElement("img");r.src=a.download_url,r.alt=a.name,r.classList.add("img-contain"),r.loading="lazy",r.dataset.index=s,l.appendChild(r),d.appendChild(l),c.appendChild(d),n.appendChild(c),o.push(a.download_url),r.addEventListener("click",(()=>{i=s,e.classList.add("is-active"),t.src=o[i]}))}}))}catch(e){console.error("Error loading gallery:",e)}}function l(){e.classList.remove("is-active")}s.addEventListener("click",(function(){i=(i+1)%o.length,t.src=o[i]})),c.addEventListener("click",(function(){i=(i-1+o.length)%o.length,t.src=o[i]})),n.addEventListener("click",l),a.addEventListener("click",l),document.querySelectorAll(".image-gallery-nav").forEach((e=>{o=[],d(e,e.dataset.folder)}))})),document.addEventListener("DOMContentLoaded",(()=>{let e=[];fetch("/api/posts.json").then((e=>e.json())).then((t=>{e=t;const a=document.getElementById("search"),s=document.getElementById("search-form"),c=document.getElementById("clear-button");a.addEventListener("keyup",n),s.addEventListener("submit",(function(e){e.preventDefault(),n()})),c.addEventListener("click",(()=>{a.value="",n()})),a.value.length>0&&n()})).catch((e=>{console.error("Failed to load posts JSON:",e)}));const t={music:'<i class="fa-solid fa-record-vinyl"></i>',"for-sof":'<i class="fa-solid fa-file-lines"></i>',lore:'<i class="fa-solid fa-book-open"></i>',characters:'<i class="fa-solid fa-address-card"></i>',website:'<i class="fa-solid fa-desktop"></i>',default:'<i class="fas fa-newspaper"></i>'};function n(){const n=document.getElementById("search").value.toLowerCase(),a=document.getElementById("search-result");let s=[],c=[];a.innerHTML="",n.length>0?a.style.display="block":a.style.display="none",e.forEach((e=>{if(!e)return;const t=e.title?e.title.toLowerCase():"",a=e.description?e.description.toLowerCase():"",i=e.content?e.content.toLowerCase():"";(t.includes(n)||a.includes(n))&&s.length<10?s.push(e):i.includes(n)&&c.length<10&&c.push(e)})),s.length<10&&c.forEach((e=>{!s.includes(e)&&s.length<10&&s.push(e)})),0===s.length?a.innerHTML='<div class="result-item p-1"><div class="description">There are no results.</div></div>':s.forEach(((e,n)=>{if(n>=10)return;const s=(c=e.category,t[c]||t.default);var c;a.innerHTML+=`\n                    <div class="search-result box">\n                        <a class="result-item" href="${e.url}">\n                            <div class="has-text-link">\n                                ${s} \n                                <span class="has-text-weight-semibold pl-1">${e.title}</span>\n                            </div>\n                            <div class="description">${e.description||"No description available."}</div>\n                        </a>\n                    </div>\n                `}))}})),(()=>{const e=document.querySelector("#image-modal");let t=document.getElementById("modal-image"),n=document.getElementById("modal-caption");const a=document.querySelector(".modal-close"),s=document.querySelector(".modal-background");function c(){e.classList.remove("is-active")}e&&(document.querySelectorAll("img").forEach((a=>{a.addEventListener("click",(a=>{t.src=a.target.src,t.alt=a.target.alt||"",n.textContent=a.target.alt||"",e.classList.add("is-active")}))})),s.addEventListener("click",c),a.addEventListener("click",c))})(),"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js").catch((()=>{}));