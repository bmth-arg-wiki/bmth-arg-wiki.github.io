document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".navbar-burger").forEach((e=>{e.addEventListener("click",(()=>{const t=e.dataset.target,n=document.getElementById(t);n&&(e.classList.toggle("is-active"),n.classList.toggle("is-active"))}))}))})),(()=>{function e(e){const t=e.split("/");return t.length>2?t[2]:""}document.addEventListener("DOMContentLoaded",(function(){const t=window.location.pathname,n=document.querySelectorAll(".tabs a"),a=e(t);n.forEach((t=>{const n=e(t.getAttribute("href"));a===n&&(document.querySelectorAll(".tabs li").forEach((e=>{e.classList.remove("is-active")})),t.parentElement.classList.add("is-active"))}))}))})(),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("toc-list");document.querySelectorAll("h2, h3").forEach((t=>{const n="h2"===t.tagName.toLowerCase()?2:3;let a=t.id||t.textContent.trim().replace(/\s+/g,"-").toLowerCase();t.id||(t.id=a);const c=document.createElement("li");c.classList.add(`toc-level-${n}`);const s=document.createElement("span"),o=document.createElement("a");o.href=`#${a}`,o.classList.add("text-adaptive"),o.textContent=t.textContent.trim().slice(0,-2),s.appendChild(o),c.appendChild(s),e&&e.appendChild(c)}))})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("#image-modal"),t=document.querySelector("#modal-image");document.querySelectorAll(".image-gallery").forEach((n=>{!async function(n,a){const c=`https://api.github.com/repos/bmth-arg-wiki/wiki-assets/contents/${a}`;try{const a=await fetch(c),s=await a.json();n.innerHTML="",s.forEach((a=>{if("file"===a.type&&a.name.match(/\.(jpg|jpeg|png|gif)$/i)){const c=document.createElement("div");c.className="column is-one-quarter-desktop is-one-quarter-tablet is-one-third-mobile";let s=document.createElement("div");s.classList.add("card");let o=document.createElement("div");o.classList.add("card-image"),s.appendChild(o);let i=document.createElement("figure");i.classList.add("image"),i.classList.add("is-3by2"),o.appendChild(i);let d=document.createElement("img");d.src=a.download_url,d.classList.add("zoomable"),d.alt=a.name,d.loading="lazy",i.appendChild(d),c.appendChild(s),d.addEventListener("click",(n=>{e.classList.add("is-active"),t.src=n.target.src})),n.appendChild(c)}}))}catch(e){console.error("Error loading gallery:",e)}}(n,n.dataset.folder)}))})),document.addEventListener("DOMContentLoaded",(()=>{let e=[];fetch("/api/posts.json").then((e=>e.json())).then((t=>{e=t;const a=document.getElementById("search"),c=document.getElementById("search-form"),s=document.getElementById("clear-button");a.addEventListener("keyup",n),c.addEventListener("submit",(function(e){e.preventDefault(),n()})),s.addEventListener("click",(()=>{a.value="",n()})),a.value.length>0&&n()})).catch((e=>{console.error("Failed to load posts JSON:",e)}));const t={music:'<i class="fa-solid fa-record-vinyl"></i>',"for-sof":'<i class="fa-solid fa-file"></i>',lore:'<i class="fa-solid fa-book-open"></i>',characters:'<i class="fa-solid fa-address-card"></i>',default:'<i class="fas fa-newspaper"></i>'};function n(){const n=document.getElementById("search").value.toLowerCase(),a=document.getElementById("search-result");let c=[],s=[];a.innerHTML="",n.length>0?a.style.display="block":a.style.display="none",e.forEach((e=>{if(!e)return;const t=e.title?e.title.toLowerCase():"",a=e.description?e.description.toLowerCase():"",o=e.content?e.content.toLowerCase():"";(t.includes(n)||a.includes(n))&&c.length<10?c.push(e):o.includes(n)&&s.length<10&&s.push(e)})),c.length<10&&s.forEach((e=>{!c.includes(e)&&c.length<10&&c.push(e)})),0===c.length?a.innerHTML='<div class="result-item p-1"><div class="description">There are no results.</div></div>':c.forEach(((e,n)=>{if(n>=10)return;const c=(s=e.category,t[s]||t.default);var s;a.innerHTML+=`\n                    <a class="result-item" href="${e.url}">\n                        <div class="h2">${c} ${e.title}</div>\n                        <div class="description">${e.description||"No description available."}</div>\n                    </a>\n                `}))}})),(()=>{const e=document.querySelector("#image-modal");let t=document.getElementById("modal-image"),n=document.getElementById("modal-caption");const a=document.querySelector(".modal-close"),c=document.querySelector(".modal-background");function s(){e.classList.remove("is-active")}e&&(document.querySelectorAll("img").forEach((a=>{a.addEventListener("click",(a=>{t.src=a.target.src,t.alt=a.target.alt,n.textContent=a.target.alt,e.classList.add("is-active")}))})),c.addEventListener("click",s),a.addEventListener("click",s))})(),"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js").catch((()=>{}));